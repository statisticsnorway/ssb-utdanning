---

title: SAS-ish functions


keywords: fastai
sidebar: home_sidebar

summary: "Mimic some of the missed functionality from SAS"
description: "Mimic some of the missed functionality from SAS"
nb_path: "04_proc.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 04_proc.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="FREQ">FREQ<a class="anchor-link" href="#FREQ"> </a></h3><p><a href="https://medium.com/eduonline24/can-we-get-sas-proc-freq-with-python-c6af752f387a">https://medium.com/eduonline24/can-we-get-sas-proc-freq-with-python-c6af752f387a</a></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># &quot;Missing&quot;?</span>
<span class="c1"># Verbose</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="freq" class="doc_header"><code>freq</code><a href="https://github.com/statisticsnorway/ssb_fellesfunksjoner_360/ssb_fellesfunksjoner_360/proc.py#L22" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>freq</code>(<strong><code>df</code></strong>, <strong><code>cols</code></strong>=<em><code>[]</code></em>, <strong><code>order</code></strong>=<em><code>'data'</code></em>, <strong><code>nopercent</code></strong>=<em><code>False</code></em>, <strong><code>nocum</code></strong>=<em><code>False</code></em>, <strong><code>freq_limit</code></strong>=<em><code>0</code></em>)</p>
</blockquote>
<p>This function tries to mimic some of the functionality of "PROC FREQ" from SAS.</p>
<p>When using crosstab, by using an asterix in a string 'col1*col2', only frequencies are included.</p>
<p>You may use numbers for columns, even negative ones, with an asterix. For example: cols = 'col1*-1', for the column "col1" crosstabbed with the last column.</p>
<h2 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h2><p>first "df" : dataframe</p>

<pre><code>Send in the pandas dataframe you want to analyze.
</code></pre>
<p>second "cols" : string, int or list of ints and or strings</p>

<pre><code>Strings may also contain an asterisk '*' between two column-names / ints. To create crosstabs of two columns.
A list of several strings / ints, will generate multiple frequency-tables from the same dataframe and
</code></pre>
<p>third "order" : string</p>

<pre><code>Only possible alternative to the default 'data' is currently 'freq', actually, if passed anything other than 'data', it will sort by frequency.
</code></pre>
<p>fourth "nopercent" : bool</p>

<pre><code>Will remove the columns 'Percent' and 'Cumulative Percent' if True
</code></pre>
<p>fifth "nocum" : bool</p>

<pre><code>Will remove the columns 'Cumulative Frequency' and 'Cumulative Percent' if True
</code></pre>
<p>sixth "freq_limit" : int</p>

<pre><code>Lower limit for frequency-rows in non-crosstabbed tables. It will remove rows with frequency values below this.

</code></pre>
<h2 id="Returns">Returns<a class="anchor-link" href="#Returns"> </a></h2><p>None</p>

<pre><code>Only displays the frequency tables, does not return a dataframe.

</code></pre>
<h2 id="Raises">Raises<a class="anchor-link" href="#Raises"> </a></h2><p>ValueError</p>

<pre><code>If no cols-parameter is specified.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Example usage at SSB</span>
<span class="kn">import</span> <span class="nn">dapla</span> <span class="k">as</span> <span class="nn">dp</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">dp</span><span class="o">.</span><span class="n">read_pandas</span><span class="p">(</span><span class="s1">&#39;/felles/mock_sysselsatte/companies_2020_10000&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)):</span> <span class="nb">print</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>employee_points
nace
region
region_code
work_id
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Freq of last column</span>
<span class="n">freq</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<style  type="text/css" >
</style><table id="T_1a4cd_" ><thead>    <tr>        <th class="col_heading level0 col0" >employee_points</th>        <th class="col_heading level0 col1" >Frequency</th>        <th class="col_heading level0 col2" >Percent</th>        <th class="col_heading level0 col3" >Cumulative Frequency</th>        <th class="col_heading level0 col4" >Cumulative Percent</th>    </tr></thead><tbody>
                <tr>
                                <td id="T_1a4cd_row0_col0" class="data row0 col0" >100</td>
                        <td id="T_1a4cd_row0_col1" class="data row0 col1" >1</td>
                        <td id="T_1a4cd_row0_col2" class="data row0 col2" >25.000000</td>
                        <td id="T_1a4cd_row0_col3" class="data row0 col3" >1</td>
                        <td id="T_1a4cd_row0_col4" class="data row0 col4" >25.000000</td>
            </tr>
            <tr>
                                <td id="T_1a4cd_row1_col0" class="data row1 col0" >50</td>
                        <td id="T_1a4cd_row1_col1" class="data row1 col1" >1</td>
                        <td id="T_1a4cd_row1_col2" class="data row1 col2" >25.000000</td>
                        <td id="T_1a4cd_row1_col3" class="data row1 col3" >2</td>
                        <td id="T_1a4cd_row1_col4" class="data row1 col4" >50.000000</td>
            </tr>
            <tr>
                                <td id="T_1a4cd_row2_col0" class="data row2 col0" >59</td>
                        <td id="T_1a4cd_row2_col1" class="data row2 col1" >1</td>
                        <td id="T_1a4cd_row2_col2" class="data row2 col2" >25.000000</td>
                        <td id="T_1a4cd_row2_col3" class="data row2 col3" >3</td>
                        <td id="T_1a4cd_row2_col4" class="data row2 col4" >75.000000</td>
            </tr>
            <tr>
                                <td id="T_1a4cd_row3_col0" class="data row3 col0" >66</td>
                        <td id="T_1a4cd_row3_col1" class="data row3 col1" >1</td>
                        <td id="T_1a4cd_row3_col2" class="data row3 col2" >25.000000</td>
                        <td id="T_1a4cd_row3_col3" class="data row3 col3" >4</td>
                        <td id="T_1a4cd_row3_col4" class="data row3 col4" >100.000000</td>
            </tr>
    </tbody></table>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Cross table of &#39;employee_points&#39; and &#39;the first column&#39;</span>
<span class="n">freq</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">cols</span> <span class="o">=</span> <span class="s1">&#39;employee_points*0&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Minimal return</span>
<span class="n">freq</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">cols</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;employee_points&#39;</span><span class="p">],</span> 
     <span class="c1"># No Percent column</span>
     <span class="n">nopercent</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> 
     <span class="c1"># No Cumulative Freq</span>
     <span class="n">nocum</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> 
     <span class="c1"># Either of the ones above will remove the &quot;cumulative percent&quot; column</span>
     <span class="c1"># Lower limit of frequencies to show</span>
     <span class="n">freq_limit</span> <span class="o">=</span> <span class="mi">30</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<style  type="text/css" >
</style><table id="T_22c1433c_8890_11eb_93b8_a6bdb2ccfbca" ><thead>    <tr>        <th class="col_heading level0 col0" >employee_points</th>        <th class="col_heading level0 col1" >Frequency</th>    </tr></thead><tbody>
                <tr>
                                <td id="T_22c1433c_8890_11eb_93b8_a6bdb2ccfbcarow0_col0" class="data row0 col0" >1</td>
                        <td id="T_22c1433c_8890_11eb_93b8_a6bdb2ccfbcarow0_col1" class="data row0 col1" >31</td>
            </tr>
            <tr>
                                <td id="T_22c1433c_8890_11eb_93b8_a6bdb2ccfbcarow1_col0" class="data row1 col0" >3</td>
                        <td id="T_22c1433c_8890_11eb_93b8_a6bdb2ccfbcarow1_col1" class="data row1 col1" >46</td>
            </tr>
            <tr>
                                <td id="T_22c1433c_8890_11eb_93b8_a6bdb2ccfbcarow2_col0" class="data row2 col0" >4</td>
                        <td id="T_22c1433c_8890_11eb_93b8_a6bdb2ccfbcarow2_col1" class="data row2 col1" >43</td>
            </tr>
            <tr>
                                <td id="T_22c1433c_8890_11eb_93b8_a6bdb2ccfbcarow3_col0" class="data row3 col0" >8</td>
                        <td id="T_22c1433c_8890_11eb_93b8_a6bdb2ccfbcarow3_col1" class="data row3 col1" >30</td>
            </tr>
    </tbody></table>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

